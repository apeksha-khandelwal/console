<!DOCTYPE html>
<html lang="en">
  <head>
    [[ if eq .Branding "origin" ]]
    <title>OpenShift Origin</title>
    [[ end ]]
    [[ if eq .Branding "ocp" ]]
    <title>OpenShift Container Platform</title>
    [[ end ]]
    [[ if eq .Branding "online" ]]
    <title>OpenShift Online</title>
    [[ end ]]
    [[ if eq .Branding "tectonic" ]]
    <title>Tectonic</title>
    [[ end ]]
    <script type="text/javascript">
      // eslint-disable-next-line no-var
      var json = [[.]];
      var error;
      try {
        ['exp', 'email', 'name', 'userID'].forEach(function (key) {
          localStorage.setItem(key, json[key]);
        });
      } catch (e) {
        error = e;
        console.error(e);
        [[ if eq .Branding "tectonic" ]]
        document.body.append('localStorage must be enabled to use Tectonic Console:');
        [[ else ]]
        document.body.append('localStorage must be enabled to use OpenShift Console:');
        [[ end ]]
        document.body.append(e.message || e.toString());
      }
      if (!error) {
        var next = localStorage.getItem('next') || '';
        if (next) {
          if (next[0] === '/' && json.loginSuccessURL.substr(-1) === '/') {
            while (next[0] === '/') {
              next = next.substr(1); //remove any slash in front of "next"
            }
          }
          localStorage.removeItem('next');
          window.location = json.loginSuccessURL + next;
        } else {
          window.location = json.loginSuccessURL;
        }
      }
    </script>
  </head>
  <body>
    [[ if eq .Branding "tectonic" ]]
    <noscript>JavaScript must be enabled to use Tectonic Console.</noscript>
    [[ else ]]
    <noscript>JavaScript must be enabled to use OpenShift Console.</noscript>
    [[ end ]]
  </body>
</html>
